<!DOCTYPE html>
<html>
  <head>
    <title>Sampled Route Map</title>

    <style>
      #map {
        height: 100vh;
        width: 100%;
      }
    </style>
  </head>

  <body>
    <h2 style="text-align:center;">EV Sampled Route Polyline</h2>
    <div id="map"></div>

    <script>
      let map;

      async function initMap() {
        // ✅ Load sampled route JSON
        const response = await fetch("sampled_route_50m.json");
        const data = await response.json();

        // Convert [lat,lng] → {lat,lng}
        const routePath = data.map((p) => ({
          lat: p[0],
          lng: p[1],
        }));

        // Center map at first point
        const start = routePath[0];

        // ✅ Create Google Map
        map = new google.maps.Map(document.getElementById("map"), {
          center: start,
          zoom: 10,
        });

        // ✅ Draw Polyline
        const routeLine = new google.maps.Polyline({
          path: routePath,
          geodesic: true,
          strokeColor: "blue",
          strokeOpacity: 0.8,
          strokeWeight: 5,
        });

        routeLine.setMap(map);

        // Marker at source
        new google.maps.Marker({
          position: start,
          map: map,
          title: "Source",
        });

        // Marker at destination
        new google.maps.Marker({
          position: routePath[routePath.length - 1],
          map: map,
          title: "Destination",
        });

        console.log("✅ Route plotted successfully!");
      }
    </script>

    <!-- ✅ Google Maps API -->
    <script
      src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&callback=initMap"
      async
      defer
    ></script>
  </body>
</html>
